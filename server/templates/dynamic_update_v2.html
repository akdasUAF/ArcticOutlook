{% extends 'base.html' %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dynamic.css') }}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    
    <title>Update Item</title>
    
{% endblock %}

{% block body %}
<nav class="nav">
    <a id="return" class="nav-link" href="{{ url_for('index') }}">Return to Main Page</a>
    <a id="return" class="nav-link" href="{{ url_for('dynamic_v2_add') }}">Return to Scraper</a>
    <a id="reset" class="nav-link" href="{{ url_for('run_dynamic_scraper_v2') }}">Reset Scraper</a>
</nav>
<div id="orig" class="row mb-3">
    <p><b>Original Item</b></br>
    Instruction Number: {{num}} </br>
    Instruction: {{instruct}}</br>
    Instruction Inputs: {{params}}</br>
    Instruction Name: {{instruct_name}}</br>
    Instruction Notes: {{notes}}</br></p>


</div>
<div class = "row">
    <form method="POST" id="update">
        <p><b>Update Item</b></br>
        <div class="col-md-4">
            <label class="form-label" for="instruction_select">Instruction:</label>
            <select class="form-select" id="instruction_select" name="instruction_select" onchange="showMore(this)">
                <option selected disabled value="">Select Instruction</option>
                <option value="1">1: Skip to HTML Tag</option>
                <option value="2">2: Skip to HTML Class</option>
                <option value="3">3: Save Value</option>
                <option value="4">4: Save Attribute</option>
                <option value="5">5: Back to Beginning</option>
                <option value="6">6: Skip to Specific Attribute</option>
                <option value="7">7: Click an Element</option>
                <option value="8">8: Go to Previous Page</option>
                <option value="9">9: Scrape Table</option>
                <option value="10">10: Run Function</option>
                <option value="11">11: For Each Loop</option>
                <option value="12">12: Create Function</option>
                <option value="13">13: End Function</option>
                <option value="14">14: Special For Each Loop</option>
            </select>
        </div>
        <div class="col-md-6">
            <label class="form-label" for="instruct_name"
            title="This is a name for this value for easier instruction reading. Example: Water System Table.">Instruction Name</label>
            <input name="instruct_name" type="text" class="form-control" value="{{instruct_name}}">
        </div>
        <div class="col-md-6">
            <label class="form-label" for="num"
            title="This is a name for this value for easier instruction reading. Example: Water System Table.">Num</label>
            <input name="num" type="text" class="form-control" value="{{num}}">
        </div>
        <div class="col-md-6">
            <label class="form-label" for="notes" style="padding-bottom: 0px;">Notes</label>
            <textarea name="notes" class="form-control">{{notes}}</textarea>
        </div>

        <div class ="10 2 1 3 4 9 12 14 op" style="display:none">
            <div class="col-md-6">
                <label class="form-label" for="param" 
                title="This is a generic name. It could be asking for a specific element label ('td', 'table') or for a name to save a value.">
                Parameter</label>
                <input class="form-control" name="param" type="text" value="{{params[0]}}">
            </div>
        </div>

        <div class = "6 4 11 14 op" style="display:none">
            <div class="col-md-6">
                <label class="form-label" for="tag" title="This refers to a html value. (Examples: 'a', 'h3')">Tag</label>
                <input class="form-control" name="tag" type="text" value="{{params[1]}}">
            </div>
        </div>

        <div class = "11 6 14 op" style="display:none">
            <div class="col-md-6">
                <label class="form-label" for="attribute" title="This refers to a specific label of an item in the html, such as the class.">Attribute</label>
                <input class="form-control" name="attribute" type="text" value="{{params[2]}}">
            </div>
        </div>

        <div class = "6 11 14 op" style="display:none">
            <div class="col-md-6">
                <label class="form-label" for="value" title="This refers to a specific value found in the html. (Example: 'Violations/Enforcement Actions)">Value</label>
                <input class="form-control" name="value" type="text" value="{{params[3]}}">
            </div>
        </div>

        <div class = "11 14 op" style="display:none">
            <div class="col-md-6">
                <label class="form-label" for="function_name" title="This refers to the name of a previously created function.">Function Name</label>
                <input class="form-control" name="function_name" type="text" value="{{params[4]}}">
            </div>
        </div>

        <div class = "9 op" style="display:none">
            <div class = "row g-3 table_options">
                <div class="col-md-6">
                    <label class="form-label" for="header" title="Row number for the header.">Header Row</label>
                    <input name="header" type="text" class="form-control"> 
                    <label class="form-label" for="col_num" title="Number of columns.">Number of Columns</label>
                    <input name="col_num" type="text" class="form-control">
                </div>
                <div class="col-md-6">
                    <label class="form-label" for="link_col" title="The column containing the link to follow.">Link Column</label>
                    <input name="link_col" type="text" class="form-control">
                    <label class="form-label" for="skip_rows" title="Optional list of rows to skip.">Skip Rows</label>
                    <input name="skip_rows" type="text" class="form-control">
                </div>
            </div>
        </div>

        <script>
            var showMore = function(option)
                {
                    var divClass = option.value;
                    $(".op").hide();
                    $("."+divClass).slideDown('medium');
                }
        </script>
        </p>
        <br/>

        <input type="submit" name="update_item" value="Update Item">
    </form>
</div>
{% endblock %}